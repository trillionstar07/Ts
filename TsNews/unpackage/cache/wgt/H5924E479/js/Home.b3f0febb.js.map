{"version":3,"file":"js/Home.b3f0febb.js","mappings":"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","sources":["webpack://tstt/./src/views/Home/index.vue?87c6","webpack://tstt/./src/views/Home/components/ArticleList.vue?e932","webpack://tstt/src/views/Home/components/ArticleList.vue","webpack://tstt/./src/views/Home/components/ArticleList.vue?cde1","webpack://tstt/./src/views/Home/components/ArticleList.vue","webpack://tstt/./src/views/Home/ChannelEdit.vue?d617","webpack://tstt/src/views/Home/ChannelEdit.vue","webpack://tstt/./src/views/Home/ChannelEdit.vue?f4bf","webpack://tstt/./src/views/Home/ChannelEdit.vue","webpack://tstt/src/views/Home/index.vue","webpack://tstt/./src/views/Home/index.vue?f10d","webpack://tstt/./src/views/Home/index.vue","webpack://tstt/./node_modules/vant/es/notify/Notify.js","webpack://tstt/./node_modules/vant/es/notify/index.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('van-nav-bar',{attrs:{\"fixed\":\"\"},scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('img',{staticClass:\"logo\",attrs:{\"src\":require(\"@/assets/TsNewsLogo.png\"),\"alt\":\"\"}}),_c('span',{staticClass:\"news\"},[_vm._v(\"TsNews\")])]},proxy:true},{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"search\",\"size\":\"0.7rem\",\"color\":\"#fff\"},on:{\"click\":_vm.moveSearchPageFn}})]},proxy:true}])})],1),_c('div',{staticClass:\"main\"},[_c('van-tabs',{attrs:{\"animated\":\"\",\"swipeable\":\"\",\"sticky\":\"\",\"offset-top\":\"1.226667rem\"},on:{\"change\":_vm.channelChange},model:{value:(_vm.channelID),callback:function ($$v) {_vm.channelID=$$v},expression:\"channelID\"}},_vm._l((_vm.userChannelList),function(obj){return _c('van-tab',{key:obj.id,staticClass:\"tabname\",attrs:{\"title\":obj.name,\"name\":obj.id}},[_c('ArticleList',{attrs:{\"channelID\":_vm.channelID}})],1)}),1),_c('van-icon',{staticClass:\"moreChannels\",attrs:{\"name\":\"plus\",\"size\":\"0.373333334rem\"},on:{\"click\":_vm.plusClickFn}})],1),_c('van-popup',{staticClass:\"channel_popup\",style:({ height: '85%' }),attrs:{\"get-container\":\"body\",\"position\":\"bottom\",\"round\":\"\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('ChannelEdit',{ref:\"editRef\",attrs:{\"userList\":_vm.userChannelList,\"unCheckList\":_vm.unCheckChannelList},on:{\"addChannelEV\":_vm.addChannelFn,\"removeChannelEV\":_vm.removeChannelFn,\"closeEV\":_vm.closeFn},model:{value:(_vm.channelID),callback:function ($$v) {_vm.channelID=$$v},expression:\"channelID\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-pull-refresh',{on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"immediate-check\":false,\"offset\":\"100\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},[(Object.keys(_vm.list).length === 0)?_c('van-skeleton',{attrs:{\"title\":\"\",\"avatar\":\"\",\"row\":10}}):_vm._l((_vm.list),function(obj){return _c('ArticleItem',{key:obj.art_id,attrs:{\"artObj\":obj},on:{\"disLikeEV\":_vm.disLikeFn,\"reportEV\":_vm.reportFn},nativeOn:{\"click\":function($event){return _vm.itemClickFn(obj.art_id)}}})})],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n\n      <van-list\n        v-model=\"loading\"\n        :finished=\"finished\"\n        finished-text=\"没有更多了\"\n        @load=\"onLoad\"\n        :immediate-check=\"false\"\n        offset=\"100\"\n      >\n        <!-- 文章列表等待加载中 -->\n          <van-skeleton title avatar :row=\"10\" v-if=\"Object.keys(list).length === 0\"/>\n          <ArticleItem\n          v-else\n          v-for=\"obj in list\"\n          :key=\"obj.art_id\"\n          :artObj=\"obj\"\n          @disLikeEV=\"disLikeFn\"\n          @reportEV='reportFn'\n          @click.native=\"itemClickFn(obj.art_id)\"\n          >\n          </ArticleItem>\n      </van-list>\n\n    </van-pull-refresh>\n  </div>\n</template>\n\n<script>\nimport ArticleItem from '../../../components/ArticleItem.vue'\nimport { getAllArticleListAPI, dislikeArticleAPI, reportArticleAPI } from '@/api'\nimport { Notify } from 'vant'\nexport default {\n  props: {\n    // list: Array // 文章列表数组\n    channelID: Number\n  },\n  data () {\n    return {\n      list: [],\n      loading: false, // 底部加载状态\n      finished: false, // 底部是否完成状态\n      theTime: new Date().getTime(), // 默认系统时间，用于分页\n      loading: false// 顶部下拉加载状态\n    }\n  },\n  components: {\n    ArticleItem\n  },\n  async created () {\n    const res = await getAllArticleListAPI({\n      channel_id: this.channelID,\n      timestamp: this.theTime\n    })\n    console.log(res)\n    // 下一段开头文章时间戳\n    // 第一次请求用系统时间（timestamp)，后台返回0-10条数据\n    // 第二次请求时 从上一次时间戳再往后球球10-19条数据......\n    this.list = res.data.data.results\n    this.theTime = res.data.data.pre_timestamp\n  },\n  methods: {\n    // 底部加载的事件方法\n    async onLoad () {\n      // 请求更多数据\n      const res = await getAllArticleListAPI({\n        channel_id: this.channelID,\n        timestamp: this.theTime\n      })\n      console.log(res)\n      this.list = [...this.list, ...res.data.data.results] // 数组合并\n      this.theTime = res.data.data.pre_timestamp\n\n      this.loading = false // 关闭加载状态提示,如果不关闭底部会一直加载\n      if (res.data.data.pre_timestamp === null) {\n        this.finished = true\n      }\n    },\n    // 顶部刷新数据时间方法\n    async onRefresh () {\n      // 清空list刷新数据\n      this.list = [...this.list]\n      this.theTime = new Date().getTime()\n      const res = await getAllArticleListAPI({\n        channel_id: this.channelID,\n        timestamp: this.theTime\n      })\n      console.log(res)\n      this.list = [...res.data.data.results] // 数组合并\n      this.theTime = res.data.data.pre_timestamp\n\n      // 顶部加载状态改为false\n      this.loading = false\n    },\n    // 反馈的不感兴趣\n    async disLikeFn (id) {\n      await dislikeArticleAPI({\n        artId: id\n      })\n      Notify({ type: 'success', message: '反馈成功', duration: 1000 })\n    },\n    // 反馈垃圾内容\n    async reportFn (id, value) {\n      await reportArticleAPI({\n        artId: id,\n        type: value\n      })\n      console.log(this.artId, this.type)\n      Notify({ type: 'success', message: '举报成功', duration: 1000 })\n    },\n    // 文章单元格点击事件\n    itemClickFn (id) {\n      this.$router.push({\n        path: `/detail?art_id=${id}`\n      })\n    }\n\n  }\n}\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleList.vue?vue&type=template&id=a69ba22a&\"\nimport script from \"./ArticleList.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"频道管理\"},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"cross\",\"size\":\"0.37333334rem\",\"color\":\"white\"},on:{\"click\":_vm.closeFn}})]},proxy:true}])}),_c('div',{staticClass:\"my-channel-box\"},[_c('div',{staticClass:\"channel-title\"},[_c('span',[_vm._v(\" 我的频道 \"),_c('span',{staticClass:\"small-title\"},[_vm._v(\" 点击\"+_vm._s(_vm.isEdit? '删除' : '进入')+\"频道 \")])]),_c('span',{on:{\"click\":_vm.editFn}},[_vm._v(_vm._s(_vm.isEdit? '完成':'编辑'))])]),_c('van-row',{attrs:{\"type\":\"flex\"}},_vm._l((_vm.userList),function(obj){return _c('van-col',{key:obj.id,attrs:{\"span\":\"6\"},on:{\"click\":function($event){return _vm.userChannleFn(obj)}}},[_c('div',{staticClass:\"channel-item van-hairline--surround\"},[_vm._v(\" \"+_vm._s(obj.name)+\" \"),_c('van-badge',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEdit && obj.id !== 0),expression:\"isEdit && obj.id !== 0\"}],staticClass:\"cross-badge\",attrs:{\"color\":\"transparent\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('van-icon',{staticClass:\"badge-icon\",attrs:{\"name\":\"cross\",\"color\":\"#cfcfcf\",\"size\":\"0.32rem\"}})]},proxy:true}],null,true)})],1)])}),1)],1),_c('div',{staticClass:\"more-channel-box\"},[_vm._m(0),_c('van-row',{attrs:{\"type\":\"flex\"}},_vm._l((_vm.unCheckList),function(obj){return _c('van-col',{key:obj.id,attrs:{\"span\":\"6\"},on:{\"click\":function($event){return _vm.moreFn(obj)}}},[_c('div',{staticClass:\"channel-item van-hairline--surround\"},[_vm._v(\" \"+_vm._s(obj.name)+\" \")])])}),1)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"channel-title\"},[_c('span',[_vm._v(\"点击添加更多频道：\")])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <!-- 弹出层头部区域 -->\n        <van-nav-bar title=\"频道管理\">\n            <template #right>\n                <van-icon name=\"cross\" size=\"0.37333334rem\" color=\"white\" @click=\"closeFn\"/>\n            </template>\n        </van-nav-bar>\n        <!-- 我的频道 -->\n        <div class=\"my-channel-box\">\n            <div class=\"channel-title\">\n                <span>\n                        我的频道\n                    <span class=\"small-title\">\n                        点击{{ isEdit? '删除' : '进入' }}频道\n                    </span>\n                </span>\n                <span @click=\"editFn\">{{ isEdit? '完成':'编辑'}}</span>\n            </div>\n            <!-- 我的频道列表 -->\n            <van-row type=\"flex\">\n                <van-col span=\"6\"\n                 v-for=\"obj in userList\"\n                  :key=\"obj.id\"\n                  @click=\"userChannleFn(obj)\">\n                    <div class=\"channel-item van-hairline--surround\">\n                        {{obj.name}}\n                        <!-- 删除的徽标 -->\n                        <van-badge color=\"transparent\" class=\"cross-badge\" v-show=\"isEdit && obj.id !== 0\">\n                            <template #content>\n                                <van-icon name=\"cross\" class=\"badge-icon\" color=\"#cfcfcf\" size=\"0.32rem\"/>\n                            </template>\n                        </van-badge>\n                    </div>\n                </van-col>\n            </van-row>\n        </div>\n\n        <!-- 更多频道 -->\n        <div class=\"more-channel-box\">\n            <div class=\"channel-title\">\n                <span>点击添加更多频道：</span>\n            </div>\n            <!-- 更多频道列表 -->\n            <van-row type=\"flex\">\n                <van-col\n                span=\"6\"\n                v-for=\"obj in unCheckList\"\n                :key=\"obj.id\"\n                @click=\"moreFn(obj)\"\n                >\n                    <div class=\"channel-item van-hairline--surround\">\n                        {{obj.name}}\n                    </div>\n                </van-col>\n            </van-row>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    userList: Array,\n    unCheckList: Array\n  },\n  data () {\n    return {\n      isEdit: false // 编辑频道的编辑状态\n    }\n  },\n  methods: {\n    editFn () { // 编辑点击事件\n      this.isEdit = !this.isEdit\n    }, // 更多频道点击事件\n    moreFn (channelObj) {\n      if (this.isEdit === true) {\n        // this.userList.push(channelObj)\n        this.$emit('addChannelEV', channelObj)\n      }\n    },\n    // 用户频道点击事件\n    userChannleFn (channelObj) {\n      if (this.isEdit === true) {\n        if (channelObj.id !== 0) {\n          this.$emit('removeChannelEV', channelObj)\n        }\n      } else {\n        // 切换频道\n        this.$emit('closeEV') // 关闭弹出层\n        this.$emit('input', channelObj.id)\n      }\n    },\n    // 关闭弹出层\n    closeFn () {\n      this.$emit('closeEV')\n    //   this.isEdit = false\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.van-popup,\n.popup-container{\n    background-color: transparent;\n    height: 100%;\n    width: 100%;\n}\n.popup-container{\n    display: flex;\n    flex-direction: column;\n}\n.pop-header{\n    height: 90px;\n    background-color: rgb(184, 20, 20);\n    color: white;\n    text-align: center;\n    font-size: 14px;\n    position: relative;\n    .title{\n        width: 100%;\n        position: absolute;\n        bottom: 15px;\n    }\n}\n.pop-body{\n    flex:1;\n    overflow: scroll;\n    padding: 8px;\n    background-color: white;\n}\n.my-channel-box,\n.more-channel-box{\n    .channel-title{\n        display: flex;\n        justify-content: space-between;\n        font-size: 14px;\n        line-height: 28px;\n        padding: 0 6px;\n    }\n}\n.channel-item{\n    font-size: 12px;\n    text-align: center;\n    line-height: 36px;\n    background-color: #fafafa;\n    margin: 5px;\n}\n// 删除的徽标\n.cross-badge{\n    position: absolute;\n    right: -3px;\n    top: 0;\n    border: none;\n}\n// 提示文字\n.small-title{\n    font-size: 10px;\n    color: gray;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChannelEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChannelEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChannelEdit.vue?vue&type=template&id=4978059a&scoped=true&\"\nimport script from \"./ChannelEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./ChannelEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChannelEdit.vue?vue&type=style&index=0&id=4978059a&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4978059a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div>\n        <!-- 头部导航\n            fixed 可以让头部div带固定定位样式 -->\n       <div>\n           <van-nav-bar fixed>\n                <template v-slot:left>\n                    <img class=\"logo\" src=\"@/assets/TsNewsLogo.png\" alt=\"\" />\n                    <span class=\"news\">TsNews</span>\n                </template>\n                <template v-slot:right>\n                    <!-- 坑：postcss只能翻译style的css样式的代码\n                            标签内行样式无法px转rem，需要手动计算\n                         坑：sticky参照‘父级div标签’进行粘性布局，如果body/html设置导读，父级div一起走了所以内部的sticky也会往上走\n                         重要：每一个van-tab代表一个标签导航，中间夹着内容，对应下属列表内容\n                         重要：每一个v-tab 都对应独立的自己的ArticleList\n                         细节：v-tab循环了很多导航，对对应的内容列表并不是一上来就创建的，而是切换到对应频道的时候才会创建\n                              第二次切换的时候是显示/隐藏组件 -->\n                    <van-icon name=\"search\" size=\"0.7rem\" color=\"#fff\" @click=\"moveSearchPageFn\" />\n                </template>\n           </van-nav-bar>\n       </div>\n       <!-- tab栏导航 -->\n       <div class=\"main\">\n            <van-tabs\n            @change=\"channelChange\"\n            animated\n            swipeable\n            v-model=\"channelID\"\n            sticky\n            offset-top=\"1.226667rem\"\n            >\n                <van-tab class=\"tabname\"\n                :title=\"obj.name\"\n                v-for=\"obj in userChannelList\"\n                :key = \"obj.id\"\n                :name=\"obj.id\"\n                >\n                <ArticleList :channelID=\"channelID\"></ArticleList>\n\n                </van-tab>\n            </van-tabs>\n          <!-- 频道编辑图标 -->\n          <van-icon @click=\"plusClickFn\" name=\"plus\" size=\"0.373333334rem\" class=\"moreChannels\"/>\n       </div>\n       <!-- 频道管理弹出层 -->\n          <van-popup\n            class=\"channel_popup\"\n            v-model=\"show\"\n            get-container=\"body\"\n            position=\"bottom\"\n            round :style=\"{ height: '85%' }\"\n          >\n        <ChannelEdit\n        :userList=\"userChannelList\"\n        :unCheckList=\"unCheckChannelList\"\n        @addChannelEV=\"addChannelFn\"\n        @removeChannelEV=\"removeChannelFn\"\n        @closeEV=\"closeFn\"\n        ref = \"editRef\"\n        v-model=\"channelID\"\n        >\n        </ChannelEdit>\n       </van-popup>\n\n    </div>\n</template>\n\n<script>\n// van-tabs的v-model给他脸频道ID实现切换\nimport {\n  getUserChannelsAPI,\n  getAllChannelsAPI,\n  updateChannelsAPI,\n  removeTheChannelAPI\n} from '@/api'\nimport ArticleList from './components/ArticleList.vue'\nimport ChannelEdit from './ChannelEdit.vue'\n// 外面现在用的是同一个数组切换数据\n// 文章列表的数据、请求、数组、分别放入到articlelist内部（自己请求自己的数据）\n// 外面只负责当前激活的频道ID\nexport default {\n  data () {\n    return {\n      channelID: 0, // 默认打开的是频道是0\n      userChannelList: [], // 用户选择的频道列表\n      allChannelList: [], // 所有频道列表\n      // articleList: [] // 文章列表\n      show: false // 频道弹出层默认/显示/隐藏\n    }\n  },\n  async created () {\n    // 获取频道列表\n    const res = await getUserChannelsAPI()\n    // console.log(res)\n    this.userChannelList = res.data.data.channels\n    // this.channelChange()\n    // 所有频道列表\n    const res2 = await getAllChannelsAPI()\n    // console.log(res2)\n    this.allChannelList = res2.data.data.channels\n  },\n  methods: {\n    // tabs的切换事件，获取文章频道数据\n    async channelChange () {\n      // 获取文章列表\n    //   const res2 = await getAllArticleListAPI({\n    //     channel_id: this.channelID,\n    //     timestamp: (new Date()).getTime()\n    //   })\n    //   console.log(res2)\n    //   this.articleList = res2.data.data.results\n    },\n    // +号点击方法\n    plusClickFn () {\n      this.show = true\n    },\n    // 添加频道\n    async addChannelFn (channelObj) {\n      this.userChannelList.push(channelObj)\n      // 把最新的数组发送给后台\n      // 过滤出 推荐频道，只传推荐频道之后的频道\n      // const newArr = this.userChannelList.filter(obj => obj.id !== 0)\n      // newArr.forEach((obj, index) => {\n      //   delete obj.name\n      //   obj.seq = index\n      // })\n      // const res = await updateChannelsAPI({\n      //   channels: newArr\n      // })\n      // console.log(res)\n      const newArr = this.userChannelList.filter(obj => obj.id !== 0)\n      const theNewArr = newArr.map((obj, index) => {\n        const newObj = { ...obj }\n        delete newObj.name\n        newObj.seq = index\n\n        return newObj\n      })\n      const res = await updateChannelsAPI({\n        channels: theNewArr\n      })\n      console.log(res)\n    },\n    // 移除频道\n    async removeChannelFn (channelObj) {\n      const index = this.userChannelList.findIndex(obj => obj.id === channelObj.id)\n      this.userChannelList.splice(index, 1)\n      // 调用删除接口\n      const res = await removeTheChannelAPI({\n        channelId: channelObj.id\n      })\n      console.log(res)\n    },\n    // 关闭弹出层\n    closeFn () {\n      this.show = false\n      // 让编辑状态回归false\n      this.$refs.editRef.isEdit = false\n    },\n    // 首页搜索放大镜按钮点击事件\n    moveSearchPageFn () {\n      this.$router.push('/search')\n    },\n    scrollFn () {\n      this.$route.meta.scrollT = document.documentElement.scrollTop\n    }\n  },\n  components: {\n    ArticleList,\n    ChannelEdit\n  },\n\n  // 计算属性\n  computed: {\n    unCheckChannelList () {\n      // 作用：把所有的频道数组取出，去用户选择的频道数组里查找\n      // 如果没有找到则让filter方法收集到一个新的数组\n    //   const newArr = this.allChannelList.filter(bigObj => {\n    //     const index = this.userChannelList.findIndex(smallObj => {\n    //       return smallObj.id === bigObj.id\n    //     })\n    //     // 如果找到\n    //     if (index > -1) {\n    //       return false\n    //     } else {\n    //       return true\n    //     }\n    //   })\n    //   return newArr// 好难写啊，救命\n    // }\n    // 极致优化 233333\n      return this.allChannelList.filter(bigObj =>\n        (this.userChannelList.findIndex(smallObj =>\n          smallObj.id === bigObj.id) === -1))\n    }\n  },\n  activated () {\n    console.log(this.$route)\n    window.addEventListener('scroll', this.scrollFn)\n    // 得到滚动条位置后like进行设置\n    document.documentElement.scrollTop = this.$route.meta.scrollT\n  },\n  deactivated () {\n    window.removeEventListener('scroll', this.scrollFn)\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.logo{\n    width: 40px;\n    height: 40px;\n}\n.news{\n    color: white;\n    margin-top: 20px;\n}\n.main{\n    padding-top: 46px;\n    /* 底部在layout上留了padding-button */\n}\n// 设置tabs容器的样式\n/deep/ .van-tabs__wrap{\n  padding-right: 30px;\n  background-color: #fff;\n}\n// 设置小图标的样式\n.moreChannels{\n  position: fixed;\n  top: 62px;\n  right: 8px;\n  z-index: 999;\n}\n\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2d073749&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=2d073749&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2d073749\",\n  null\n  \n)\n\nexport default component.exports","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _mergeJSXProps from \"@vue/babel-helper-vue-jsx-merge-props\";\n// Utils\nimport { createNamespace } from '../utils';\nimport { inherit } from '../utils/functional'; // Mixins\n\nimport { popupMixinProps } from '../mixins/popup'; // Components\n\nimport Popup from '../popup'; // Types\n\nvar _createNamespace = createNamespace('notify'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nfunction Notify(h, props, slots, ctx) {\n  var style = {\n    color: props.color,\n    background: props.background\n  };\n  return h(Popup, _mergeJSXProps([{\n    \"attrs\": {\n      \"value\": props.value,\n      \"position\": \"top\",\n      \"overlay\": false,\n      \"duration\": 0.2,\n      \"lockScroll\": false\n    },\n    \"style\": style,\n    \"class\": [bem([props.type]), props.className]\n  }, inherit(ctx, true)]), [(slots.default == null ? void 0 : slots.default()) || props.message]);\n}\n\nNotify.props = _extends({}, popupMixinProps, {\n  color: String,\n  message: [Number, String],\n  duration: [Number, String],\n  className: null,\n  background: String,\n  getContainer: [String, Function],\n  type: {\n    type: String,\n    default: 'danger'\n  }\n});\nexport default createComponent(Notify);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport Vue from 'vue';\nimport VanNotify from './Notify';\nimport { isObject, isServer } from '../utils';\nimport { mount } from '../utils/functional';\nvar timer;\nvar instance;\n\nfunction parseOptions(message) {\n  return isObject(message) ? message : {\n    message: message\n  };\n}\n\nfunction Notify(options) {\n  /* istanbul ignore if */\n  if (isServer) {\n    return;\n  }\n\n  if (!instance) {\n    instance = mount(VanNotify, {\n      on: {\n        click: function click(event) {\n          if (instance.onClick) {\n            instance.onClick(event);\n          }\n        },\n        close: function close() {\n          if (instance.onClose) {\n            instance.onClose();\n          }\n        },\n        opened: function opened() {\n          if (instance.onOpened) {\n            instance.onOpened();\n          }\n        }\n      }\n    });\n  }\n\n  options = _extends({}, Notify.currentOptions, parseOptions(options));\n\n  _extends(instance, options);\n\n  clearTimeout(timer);\n\n  if (options.duration && options.duration > 0) {\n    timer = setTimeout(Notify.clear, options.duration);\n  }\n\n  return instance;\n}\n\nfunction defaultOptions() {\n  return {\n    type: 'danger',\n    value: true,\n    message: '',\n    color: undefined,\n    background: undefined,\n    duration: 3000,\n    className: '',\n    onClose: null,\n    onClick: null,\n    onOpened: null\n  };\n}\n\nNotify.clear = function () {\n  if (instance) {\n    instance.value = false;\n  }\n};\n\nNotify.currentOptions = defaultOptions();\n\nNotify.setDefaultOptions = function (options) {\n  _extends(Notify.currentOptions, options);\n};\n\nNotify.resetDefaultOptions = function () {\n  Notify.currentOptions = defaultOptions();\n};\n\nNotify.install = function () {\n  Vue.use(VanNotify);\n};\n\nNotify.Component = VanNotify;\nVue.prototype.$notify = Notify;\nexport default Notify;"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","scopedSlots","_u","key","fn","staticClass","_v","proxy","on","moveSearchPageFn","channelChange","model","value","callback","$$v","channelID","expression","_l","obj","id","name","plusClickFn","style","height","show","ref","userChannelList","unCheckChannelList","addChannelFn","removeChannelFn","closeFn","staticRenderFns","onRefresh","loading","finished","onLoad","Object","keys","list","length","art_id","disLikeFn","reportFn","nativeOn","$event","itemClickFn","props","data","theTime","components","ArticleItem","channel_id","timestamp","console","methods","artId","type","message","duration","path","component","_s","isEdit","editFn","userChannleFn","directives","rawName","_m","moreFn","userList","unCheckList","allChannelList","newObj","channels","channelId","scrollFn","ArticleList","ChannelEdit","computed","smallObj","activated","window","document","deactivated","_createNamespace","createNamespace","createComponent","bem","Notify","h","slots","ctx","color","background","Popup","_mergeJSXProps","className","inherit","default","_extends","popupMixinProps","String","Number","getContainer","Function","timer","instance","parseOptions","isObject","options","isServer","mount","VanNotify","click","event","onClick","close","onClose","opened","onOpened","currentOptions","clearTimeout","setTimeout","clear","defaultOptions","undefined","setDefaultOptions","resetDefaultOptions","install","Vue","Component"],"sourceRoot":""}