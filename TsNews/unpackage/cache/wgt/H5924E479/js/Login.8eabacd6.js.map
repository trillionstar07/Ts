{"version":3,"file":"js/Login.8eabacd6.js","mappings":"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","sources":["webpack://tstt/./src/views/Login/index.vue?ddec","webpack://tstt/src/views/Login/index.vue","webpack://tstt/./src/views/Login/index.vue?93c6","webpack://tstt/./src/views/Login/index.vue","webpack://tstt/./node_modules/vant/es/notify/Notify.js","webpack://tstt/./node_modules/vant/es/notify/index.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"TsNews-登录\"}}),_c('div',[_vm._m(0),_c('van-form',{on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"required\":\"\",\"name\":\"mobile\",\"label\":\"手机号\",\"placeholder\":\"请输入手机号\",\"rules\":[{  required: true, message: '请填写用户手机号'\n          ,pattern: /^1[3-9]\\d{9}$/ }]},model:{value:(_vm.user.mobile),callback:function ($$v) {_vm.$set(_vm.user, \"mobile\", $$v)},expression:\"user.mobile\"}}),_c('van-field',{attrs:{\"required\":\"\",\"type\":\"password\",\"name\":\"code\",\"label\":\"密码\",\"placeholder\":\"请输入密码\",\"rules\":[{ required: true, message: '请填写密码'\n          ,pattern: /^\\d{6}/ }]},model:{value:(_vm.user.code),callback:function ($$v) {_vm.$set(_vm.user, \"code\", $$v)},expression:\"user.code\"}}),_c('div',{staticStyle:{\"margin\":\"30px\"}},[_c('van-button',{attrs:{\"disabled\":_vm.isLoading,\"loading\":_vm.isLoading,\"loading-text\":\"请稍后· · ·\",\"round\":false,\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\" 登录\")])],1)],1)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"logo\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":require(\"@/assets/TsNewsLogo.png\"),\"alt\":\"\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <van-nav-bar title=\"TsNews-登录\"/>\n      <div>\n        <!-- 整体表单组件\n        @submit：是自定义事件，提交事件\n        van-field：输入框\n        v-model：数据双向绑定\n    输入框的name属性桑声明，在表单整体提交的时候默认手机一个提交对象，往后台发送的参数就是name的值\n    lable属性是输入框左侧文本\n    rules表示表单校验规则   :属性名=\"表达式\"，如果没有冒号则是字符串\n        -->\n         <div class=\"logo\">\n          <img src=\"@/assets/TsNewsLogo.png\" alt=\"\" class=\"avatar\" />\n         </div>\n          <van-form @submit=\"onSubmit\">\n          <van-field\n            v-model=\"user.mobile\"\n            required\n            name=\"mobile\"\n            label=\"手机号\"\n            placeholder=\"请输入手机号\"\n            :rules=\"[{  required: true, message: '请填写用户手机号'\n            ,pattern: /^1[3-9]\\d{9}$/ }]\"\n          />\n          <van-field\n            v-model=\"user.code\"\n            required\n            type=\"password\"\n            name=\"code\"\n            label=\"密码\"\n            placeholder=\"请输入密码\"\n            :rules=\"[{ required: true, message: '请填写密码'\n            ,pattern: /^\\d{6}/ }]\"\n          />\n          <div style=\"margin: 30px;\">\n          <!--\n            round：是否为圆形\n            block：是否为块级元素\n            type：代表类型\n            native-type：代表原生button的type属性\n            submit：代表这个van-button组件渲染的原生button标签type数submit提交整个表单功能的按钮\n           -->\n            <van-button\n            :disabled= 'isLoading'\n            :loading = 'isLoading'\n            loading-text=\"请稍后· · ·\"\n            :round=\"false\"\n            block type=\"info\"\n            native-type=\"submit\"\n            >\n            登录</van-button>\n          </div>\n        </van-form>\n      </div>\n  </div>\n</template>\n\n<script>\n/*\n写需求的套路：\n1、html+css\n2、数据铺设、数据绑定、数据微调\n3、js交互\n组件使用套路：\n1、找组件、引组件、用组件（标签和js复制），读、删、改\n */\n\n// 目标一、实现顶部导航，自定义样式\n// 目标二、表单组件的增、改、读\n// 目标三、手机值后调用接口查看登录结果\n// 目标四、提示正在登录，防止用户频繁点击\nimport { loginAPI } from '@/api'\nimport { setToken } from '@/utils/token'\nimport { Notify } from 'vant'\n\nexport default {\n  data () {\n    return {\n      user: {\n        mobile: '13007437453', // 手机号\n        code: '246810'// 验证码（密码，必须是246810）\n      },\n      isLoading: false // 登录按钮的加载状态\n    }\n  },\n  methods: {\n    // 提交方法（from整体通过验证后才会触发）\n    async onSubmit (values) {\n      console.log('submit', values)\n      console.log(this.user)\n      this.isLoading = true // 登录按钮的加载状态\n\n      try {\n        const res = await loginAPI({\n          mobile: this.user.mobile,\n          code: this.user.code\n        // 获取到收集到的值并提交请求\n        })\n        Notify({ type: 'success', message: '登录成功', duration: 1500, background: 'red' })\n        setToken(res.data.data.token)\n        localStorage.setItem('refresh_token', res.data.data.refresh_token)\n        // 登陆成功后跳转、跳转一定要写在最后，尽量最后执行\n        // this.$router.push:会产生历史记录，可以回退,this.$router.replace()替换不可回退\n        this.$router.replace({\n          path: this.$route.query.path || 'layout/home' // 要写全\n        })\n      } catch (err) {\n        // Promise内的ajax抛出错误进入这里\n        // 这里不建议用alert提示，最好使用反馈弹窗\n        Notify({ type: 'primary', message: '账号或者密码错误', duration: 2000, background: '#ff6700' })\n      }\n      this.isLoading = false // 登录按钮的加载状态\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n/* lang = 'less' 表示当前标签是less语法，该语法中/deep/就不会报错\n .van-nav-bar{\n   background-color: #1b1b1bd0\n }\n /* 此选择器名字是van-nav-bar组件内标签\n scoped尝试把此选择器后属性选择器匹配当前页\n 面标签（选不中组件内部的） */\n\n /* /deep/ .van-nav-bar__title{\n   color: white;\n   font-size: 20px;\n } */\n /* 结论： 如果要修改组件内的样式，而用了scoped，就需要在选择器前面加上/deep/ */\n\n   .avatar {\n    width: 70px;\n    height: 70px;\n    background-color: red;\n    border-radius: 5px;\n    margin-bottom: 60px;\n    margin-left: 40%;\n  }\n  .logo {\n    background-color: #f8f8f8;\n    color: white;\n    padding-top: 80px;\n    //border-radius: 0 0 800px 800px;\n    &::after {\n      display: none;\n    }\n\n  }\n\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=90054a60&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=90054a60&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"90054a60\",\n  null\n  \n)\n\nexport default component.exports","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _mergeJSXProps from \"@vue/babel-helper-vue-jsx-merge-props\";\n// Utils\nimport { createNamespace } from '../utils';\nimport { inherit } from '../utils/functional'; // Mixins\n\nimport { popupMixinProps } from '../mixins/popup'; // Components\n\nimport Popup from '../popup'; // Types\n\nvar _createNamespace = createNamespace('notify'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nfunction Notify(h, props, slots, ctx) {\n  var style = {\n    color: props.color,\n    background: props.background\n  };\n  return h(Popup, _mergeJSXProps([{\n    \"attrs\": {\n      \"value\": props.value,\n      \"position\": \"top\",\n      \"overlay\": false,\n      \"duration\": 0.2,\n      \"lockScroll\": false\n    },\n    \"style\": style,\n    \"class\": [bem([props.type]), props.className]\n  }, inherit(ctx, true)]), [(slots.default == null ? void 0 : slots.default()) || props.message]);\n}\n\nNotify.props = _extends({}, popupMixinProps, {\n  color: String,\n  message: [Number, String],\n  duration: [Number, String],\n  className: null,\n  background: String,\n  getContainer: [String, Function],\n  type: {\n    type: String,\n    default: 'danger'\n  }\n});\nexport default createComponent(Notify);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport Vue from 'vue';\nimport VanNotify from './Notify';\nimport { isObject, isServer } from '../utils';\nimport { mount } from '../utils/functional';\nvar timer;\nvar instance;\n\nfunction parseOptions(message) {\n  return isObject(message) ? message : {\n    message: message\n  };\n}\n\nfunction Notify(options) {\n  /* istanbul ignore if */\n  if (isServer) {\n    return;\n  }\n\n  if (!instance) {\n    instance = mount(VanNotify, {\n      on: {\n        click: function click(event) {\n          if (instance.onClick) {\n            instance.onClick(event);\n          }\n        },\n        close: function close() {\n          if (instance.onClose) {\n            instance.onClose();\n          }\n        },\n        opened: function opened() {\n          if (instance.onOpened) {\n            instance.onOpened();\n          }\n        }\n      }\n    });\n  }\n\n  options = _extends({}, Notify.currentOptions, parseOptions(options));\n\n  _extends(instance, options);\n\n  clearTimeout(timer);\n\n  if (options.duration && options.duration > 0) {\n    timer = setTimeout(Notify.clear, options.duration);\n  }\n\n  return instance;\n}\n\nfunction defaultOptions() {\n  return {\n    type: 'danger',\n    value: true,\n    message: '',\n    color: undefined,\n    background: undefined,\n    duration: 3000,\n    className: '',\n    onClose: null,\n    onClick: null,\n    onOpened: null\n  };\n}\n\nNotify.clear = function () {\n  if (instance) {\n    instance.value = false;\n  }\n};\n\nNotify.currentOptions = defaultOptions();\n\nNotify.setDefaultOptions = function (options) {\n  _extends(Notify.currentOptions, options);\n};\n\nNotify.resetDefaultOptions = function () {\n  Notify.currentOptions = defaultOptions();\n};\n\nNotify.install = function () {\n  Vue.use(VanNotify);\n};\n\nNotify.Component = VanNotify;\nVue.prototype.$notify = Notify;\nexport default Notify;"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_m","on","onSubmit","required","message","pattern","model","value","user","callback","$$v","$set","expression","staticStyle","isLoading","_v","staticRenderFns","staticClass","data","mobile","code","methods","console","type","duration","background","setToken","localStorage","path","component","_createNamespace","createNamespace","createComponent","bem","Notify","h","props","slots","ctx","style","color","Popup","_mergeJSXProps","className","inherit","default","_extends","popupMixinProps","String","Number","getContainer","Function","timer","instance","parseOptions","isObject","options","isServer","mount","VanNotify","click","event","onClick","close","onClose","opened","onOpened","currentOptions","clearTimeout","setTimeout","clear","defaultOptions","undefined","setDefaultOptions","resetDefaultOptions","install","Vue","Component"],"sourceRoot":""}