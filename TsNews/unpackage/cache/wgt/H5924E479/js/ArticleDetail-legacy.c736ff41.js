"use strict";(self["webpackChunktstt"]=self["webpackChunktstt"]||[]).push([[707],{8205:function(t,e,n){n.r(e),n.d(e,{default:function(){return g}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{fixed:"",title:"文章详情","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),n("div",{staticClass:"article-container"},[n("h1",{staticClass:"art-title"},[t._v(t._s(t.artObj.title))]),n("van-cell",{attrs:{cennter:"",title:t.artObj.aut_name,label:t.formateDate(t.artObj.pubdate)},scopedSlots:t._u([{key:"icon",fn:function(){return[n("img",{staticClass:"avatar",attrs:{src:t.artObj.aut_photo,alt:""}})]},proxy:!0},{key:"default",fn:function(){return[n("div",[!0===t.artObj.is_followed?n("van-button",{attrs:{type:"info",size:"mini"},on:{click:function(e){return t.followedFn(!0)}}},[t._v("已 关 注")]):n("van-button",{attrs:{icon:"plus",type:"info",size:"mini",plain:""},on:{click:function(e){return t.followedFn(!1)}}},[t._v("关 注")])],1)]},proxy:!0}])}),n("van-divider"),0===Object.keys(t.artObj).length?n("van-skeleton",{attrs:{title:"",row:10}}):n("div",{staticClass:"art-content",domProps:{innerHTML:t._s(t.artObj.content)}}),n("van-divider",[t._v("End")]),n("div",{staticClass:"like-box"},[1===t.artObj.attitude?n("van-button",{attrs:{icon:"good-job",type:"danger",size:"small"},on:{click:function(e){return t.likeFn(!0)}}},[t._v(" 已点赞")]):n("van-button",{attrs:{icon:"good-job-o",type:"danger",plain:"",size:"small"},on:{click:function(e){return t.likeFn(!1)}}},[t._v(" 点个赞")])],1)],1),n("div",[n("CommentListVue")],1)],1)},r=[],o=n(6198),i=(n(8975),n(693)),s=n(1709),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"cmt-list",class:{"art-cmt-container-1":!0,"art-cmt-container-2":!0}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"已经到底啦，发表你的看法吧!","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.commentArr,(function(e){return n("div",{key:e.com_id,staticClass:"cmt-item"},[n("div",{staticClass:"cmt-header"},[n("div",{staticClass:"cmt-header-left"},[n("img",{staticClass:"avatar",attrs:{src:e.aut_photo,alt:""}}),n("span",{staticClass:"uname"},[t._v(t._s(e.aut_name))])]),n("div",{staticClass:"cmt-header-right"},[!0===e.is_liking?n("van-icon",{attrs:{name:"good-job",size:"20",color:"red"},on:{click:function(n){return t.likeFn(!0,e)}}}):n("van-icon",{attrs:{name:"good-job-o",size:"16",color:"gray"},on:{click:function(n){return t.likeFn(!1,e)}}})],1)]),n("div",{staticClass:"cmt-body"},[t._v(" "+t._s(e.content)+" ")]),n("div",{staticClass:"cmt-footer"},[t._v(t._s(t.timeAgo(e.pubdate)))])])})),0)],1),n("div",[n("div",{staticClass:"add-cmt-box van-hairline--top"},[n("van-icon",{attrs:{name:"arrow-left",size:"0.48rem"},on:{click:function(e){return t.$router.back()}}}),n("div",{staticClass:"ipt-cmt-left",on:{click:t.toggleShowFn}},[t._v("说说你的看法")]),n("div",{staticClass:"icon-box"},[n("van-badge",{attrs:{content:0===t.totalCount?"":t.totalCount,max:"99"}},[n("van-icon",{attrs:{name:"comment-o",size:"0.53333334rem"},on:{click:t.commentClickFn}})],1),t.starFn()?n("van-icon",{attrs:{name:"star",size:"0.53333334rem",color:"#ff6700"},on:{click:t.starFn}}):n("van-icon",{attrs:{name:"star-o",size:"0.53333334rem"},on:{click:t.starFn}}),n("van-icon",{attrs:{name:"share-o",size:"0.53333334rem"},on:{click:function(e){t.showShare=!0}}}),n("van-share-sheet",{attrs:{title:"立即分享给好友",options:t.options},model:{value:t.showShare,callback:function(e){t.showShare=e},expression:"showShare"}})],1)],1),n("van-popup",{staticClass:"channel_popup",style:{height:"25%"},attrs:{position:"bottom",duration:"0.3",closed:"",round:"","safe-area-inset-bottom":!0},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticClass:"cmt-box van-hairline--top"},[n("textarea",{directives:[{name:"fofo",rawName:"v-fofo"},{name:"model",rawName:"v-model.trim",value:t.comText,expression:"comText",modifiers:{trim:!0}}],attrs:{placeholder:"友善是交流的起点"},domProps:{value:t.comText},on:{input:function(e){e.target.composing||(t.comText=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),n("van-button",{attrs:{type:"default",disabled:0===t.comText.length},on:{click:t.sendFn}},[t._v("发布")])],1)])],1)])},l=[],u=n(4479),d=(n(2222),{data:function(){return{offset:null,commentArr:[],totalCount:"",isShowCmtBox:!0,show:!1,comText:"",loading:!1,finished:!1,showShare:!1,options:[[{name:"微信",icon:"wechat"},{name:"朋友圈",icon:"wechat-moments"},{name:"微博",icon:"weibo"},{name:"QQ",icon:"qq"},{name:"复制链接",icon:"link"}]]}},created:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.fN)({a:"a",id:t.$route.query.art_id});case 2:n=e.sent,t.commentArr=n.data.data.results,t.totalCount=n.data.data.total_count,t.lastId=n.data.data.last_id,0===n.data.data.results.length&&(t.finished=!0);case 7:case"end":return e.stop()}}),e)})))()},methods:{timeAgo:s.S,likeFn:function(t,e){return(0,o.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!0!==t){n.next=6;break}return e.is_liking=!1,n.next=4,(0,i.sU)({comId:e.com_id});case 4:n.next=9;break;case 6:return e.is_liking=!0,n.next=9,(0,i.Lt)({comId:e.com_id});case 9:case"end":return n.stop()}}),n)})))()},toggleShowFn:function(){this.show=!0},commentClickFn:function(){document.querySelector(".like-box").scrollIntoView({behavior:"smooth"})},sendFn:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.ge)({id:t.$route.query.art_id,content:t.comText});case 2:n=e.sent,console.log(n),t.commentArr.unshift(n.data.data.new_obj),t.totalCount++,t.comText="",t.show=!1,document.querySelector(".like-box").scrollIntoView({behavior:"smooth"});case 9:case"end":return e.stop()}}),e)})))()},onLoad:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.commentArr.length>0)){e.next=10;break}return e.next=3,(0,i.fN)({a:"a",id:t.$route.query.art_id,offset:t.lastId});case 3:n=e.sent,t.totalCount=n.data.data.total_count,t.lastId=n.data.data.last_id,null===n.data.data.last_id&&(t.finished=!0,t.commentArr=[].concat((0,u.Z)(t.commentArr),(0,u.Z)(n.data.data.results))),t.loading=!1,e.next=11;break;case 10:t.loading=!1;case 11:case"end":return e.stop()}}),e)})))()},shareFn:function(){this.showShare=!0},starFn:function(){return!1}}}),m=d,f=n(1001),v=(0,f.Z)(m,c,l,!1,null,"796cabc0",null),h=v.exports,p={name:"myDetail",data:function(){return{artObj:{}}},created:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.$d)({artId:t.$route.query.art_id});case 2:n=e.sent,console.log(n),t.artObj=n.data.data;case 5:case"end":return e.stop()}}),e)})))()},methods:{formateDate:s.S,followedFn:function(t){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!0!==t){n.next=8;break}return e.artObj.is_followed=!1,n.next=4,(0,i.Nr)({userId:e.artObj.aut_id});case 4:a=n.sent,console.log(a),n.next=13;break;case 8:return e.artObj.is_followed=!0,n.next=11,(0,i.iQ)({userId:e.artObj.aut_id});case 11:r=n.sent,console.log(r);case 13:case"end":return n.stop()}}),n)})))()},likeFn:function(t){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!0!==t){n.next=8;break}return e.artObj.attitude=0,n.next=4,(0,i.HB)({artId:e.artObj.art_id});case 4:a=n.sent,console.log(a),n.next=13;break;case 8:return e.artObj.attitude=1,n.next=11,(0,i.DO)({artId:e.artObj.art_id});case 11:r=n.sent,console.log(r);case 13:case"end":return n.stop()}}),n)})))()}},components:{CommentListVue:h}},b=p,k=(0,f.Z)(b,a,r,!1,null,"1133a9f5",null),g=k.exports}}]);
//# sourceMappingURL=ArticleDetail-legacy.c736ff41.js.map